<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>QR Code Generator</title>
	<style>
		* {
			box-sizing: border-box;
		}

		body {
			font-family: system-ui, -apple-system, sans-serif;
			margin: 0;
			min-height: 100vh;
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			padding: 24px;
		}

		h1 {
			font-size: 1.5rem;
			font-weight: 700;
			margin: 0 0 24px;
		}

		.qr-form {
			display: flex;
			flex-direction: column;
			gap: 16px;
			width: 100%;
			max-width: 320px;
		}

		.qr-form label {
			font-size: 0.875rem;
			font-weight: 600;
		}

		.qr-form input {
			width: 100%;
			padding: 12px 14px;
			font-size: 1rem;
			border-radius: 8px;
		}

		.qr-form input:focus {
			outline: none;
		}

		.qr-form button {
			padding: 12px 20px;
			font-size: 1rem;
			font-weight: 600;
			border-radius: 8px;
			cursor: pointer;
		}

		.qr-output {
			margin-top: 32px;
			padding: 24px;
			border: 1px solid currentColor;
			border-radius: 12px;
			opacity: 0.9;
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 16px;
		}

		#qrcode {
			display: flex;
			justify-content: center;
			align-items: center;
			min-height: 200px;
		}

		#qrcode canvas,
		#qrcode img {
			border-radius: 8px;
		}

		.qr-output .hint {
			font-size: 0.875rem;
			opacity: 0.8;
		}

		.qr-output a.download {
			font-size: 0.875rem;
			text-decoration: none;
		}

		.qr-output a.download:hover {
			text-decoration: underline;
		}
	</style>
</head>

<body>
	<h1>QR Code Generator</h1>
	<form class="qr-form" id="qr-form">
		<label for="qr-input">URL or text</label>
		<input type="text" id="qr-input" name="text" placeholder="https://example.com or any text" value="" required
			autofocus />
		<button type="submit">Generate QR code</button>
	</form>
	<div class="qr-output" id="qr-output" hidden>
		<div id="qrcode"></div>
		<p class="hint">Scan with your phone camera or a QR app</p>
		<a class="download" id="qr-download" href="#" download="qrcode.png">Download PNG</a>
	</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
	<script>
		(function () {
			var form = document.getElementById('qr-form');
			var input = document.getElementById('qr-input');
			var output = document.getElementById('qr-output');
			var container = document.getElementById('qrcode');
			var downloadLink = document.getElementById('qr-download');
			var lastQR = null;

			function generate(text) {
				container.innerHTML = '';
				lastQR = new QRCode(container, {
					text: text,
					width: 256,
					height: 256
				});
				output.hidden = false;
				// QRCode.js renders async; set download when canvas appears
				setTimeout(function setDownload() {
					var canvas = container.querySelector('canvas');
					if (canvas) {
						downloadLink.href = canvas.toDataURL('image/png');
						downloadLink.download = 'qrcode.png';
					} else {
						setTimeout(setDownload, 50);
					}
				}, 100);
			}

			form.addEventListener('submit', function (e) {
				e.preventDefault();
				var text = (input.value || '').trim();
				if (!text) return;
				generate(text);
			});
		})();
	</script>
</body>

</html>